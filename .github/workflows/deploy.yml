- name: Deploy to AWS EC2
  uses: appleboy/ssh-action@v1.0.3
  with:
    host: ${{ secrets.EC2_HOST }}
    username: ec2-user
    key: ${{ secrets.EC2_SSH_KEY }}
    request_pty: true
    script: |
      set -e
      cd /home/ec2-user/flask-app
      git pull origin main
      pip3 install -r requirements.txt
      sudo systemctl restart flask
